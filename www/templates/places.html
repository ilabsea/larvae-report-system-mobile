<ion-view ng-init='getPlaces()'
  title='{{"place.report_week" | translate }} {{selectedWeek}}
    {{"place.of" | translate }} {{selectedYear}}' name="places-view">
  <ion-nav-buttons side="left">
    <button class="button button-icon tranparent-button" ng-click="goBack()">
      <i class="icon ion-custom-back"></i>
    </button>
  </ion-nav-buttons>
  <ion-content class="padding">
    <span style="font-size: 16px;">
      {{"place.please_select_place_to_report" | translate}}
    </span>

    <ion-list show-delete="false" can-swipe="true">
      <ion-item ui-sref="form-site" ng-repeat='place in places' ng-click='setPlace(place)'>
        {{place.name}}
        <i ng-if="place.siteOnServer" class="icon ion-clowd-checked"></i>
        <i ng-if="!place.siteOnServer && place.siteInvalid" class="icon ion-warning"></i>
        <i ng-if="!place.siteOnServer && !place.siteInvalid" class="icon" ng-class="place.hasData ? 'ion-checkmark' : ''"></i>

        <ion-option-button class="button-assertive icon ion-trash-a"
                            ng-click='deleteReport(place)'>
        </ion-option-button>
      </ion-item>
    </ion-list>

    <button ng-disabled="numberOfSites == 0" class='button button-block default-button'
            ng-click="uploadSites()">
      {{"place.send_report_to_malaria_station" | translate}}
    </button>

  </ion-content>
</ion-view>
